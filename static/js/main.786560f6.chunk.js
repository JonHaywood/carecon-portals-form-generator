(this["webpackJsonpform-generator"]=this["webpackJsonpform-generator"]||[]).push([[0],{127:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=127},180:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},477:function(e,t,n){},546:function(e,t,n){},547:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),s=n(34),r=n.n(s),c=(n(180),n(181),n(182),n(183),n(27)),o=(n(184),n(554)),l=n(555);var d=n(116),u=n(75),f=(n(185),n(560)),m=n(553),p=n(152),b=n.n(p),j=n(153),g=n.n(j),O=n(30),h=n.n(O),x=n(154),F=n.n(x),y='import React, { useState } from \'react\';\nimport PropTypes from \'prop-types\';\nimport { useDispatch, useSelector } from \'react-redux\';<% if (validationFields.length > 0) { %>\n    import * as Yup from \'yup\';\n<% } %>import {\n    Suspend, \n    Form, \n    FieldGroup, \n    FieldLabel, \n    FieldInput,\n    <% includes.forEach(include => { %><%= include %>,<% }) %>\n} from \'@cc/common\';\n\n// IMPLEMENT THE BELOW REDUX THUNKS\nimport {\n    loadExistingItem,\n    saveItem,\n} from \'redux/slices/myDialog\';\n\nexport const MyForm = ({ <% if (settings.isDialog) { %>onAccept, onCancel<% } %> }) => {\n    const [isLoading, setIsLoading] = useState(true);\n    const dispatch = useDispatch();\n\n    // THIS CODE BLOCK CAN BE DELETED IF LOADING AN EXISTING ITEM IS NOT APPLICABLE\n    useEffect(() => {<% if (settings.isDialog) {%>\n        if (!isVisible) return;\n        <% } %>\n        const init = async () => {\n            setIsLoading(true);\n            await dispatch(loadExistingItem(existingId));\n            setIsLoading(false);\n        };\n\n        init();\n    }, [existingId]);\n    <% if (settings.isDialog) {%>\n    if (!isVisible) return null;\n    <% } %>\n    const handleSubmit = async (actions) => {\n        const { wasSuccessful, itemId } = await dispatch(saveItem());\n        await actions.completeSubmission();\n        if (!wasSuccessful) return;\n        <% if (settings.isDialog) {%>onAccept(itemId);<% } %>\n        await actions.resetForm();\n    };\n\n    return (\n        <Form\n            slice="<%= settings.slice %>"\n            <%_ if (settings.prefix) { %>\n            prefix="<%= settings.prefix %>"<% if (validationFields.length > 0) { %>\n            <% } _%>\n            validation={Yup.object({\n            <% validationFields.forEach(validationField => { %>\n                <%= validationField.name %>: Yup.string().required(\'<%= validationField.label %> is required\'),<% }) %>\n            })}\n            <% } %>\n            onSubmit={handleSubmit}\n            useFormTag={true}\n        ><% if (settings.isDialog) { %>\n            <FormDialog\n                title="My Dialog"\n                acceptText="Save"\n                acceptButtonType="submit"\n                onCancel={(actions) => {\n                    actions.resetForm();\n                    onCancel();\n                }}\n                className="my-dialog"\n            ><% } %>\n                <Suspend isLoading={isLoading}><% if (settings.isDialog) { %>\n                    <FormDialogContent><% } %><% fields.forEach(field => { %>\n                        <FieldGroup horizontal>\n                            <FieldLabel<% if (field.required) { %> required<% } %>><%= field.label %></FieldLabel>\n                            <FieldInput stretch>\n                                <<%= field.type %> name="<%= field.name %>"<% if(field.isEnum) { %> enumType="<%= field.name.charAt(0).toUpperCase() + field.name.slice(1) %>"<% } %> <% if (field.required) { %> required <% } %>/>\n                            </FieldInput>\n                        </FieldGroup><% }); %>\n                        <% if (settings.isDialog) { %></FormDialogContent><% } %>\n                    <% if (!settings.isDialog) { %><SubmitButton /><% } %>\n                </Suspend><% if (settings.isDialog) { %>\n            </FormDialog><% } %>\n        </Form>\n    )\n};\n\nMyForm.PropTypes = {\n\n};\n',D=n(5),v=function(){var e=Object(i.useContext)(Y).state,t=Object(i.useState)("Generating..."),n=Object(c.a)(t,2),a=n[0],s=n[1],r=Object(i.useState)(!1),o=Object(c.a)(r,2),l=o[0],p=o[1];Object(i.useEffect)((function(){var t,n=(t=function(e){return(e=Object(u.a)({},e)).includes=[].concat(Object(d.a)(new Set(e.fields.map((function(e){return e.type})))),Object(d.a)(e.settings.isDialog?["FormDialog","FormDialogContent"]:["SubmitButton"])),e.validationFields=e.fields.filter((function(e){return e.required})),e}(t=e),b.a.render(y,t));n=g.a.format(n,{parser:"babel",plugins:[h.a],tabWidth:4}),s(n)}),[e]);return Object(D.jsxs)("div",{className:"code-display",children:[Object(D.jsx)("div",{className:"code-display__copy",onClick:function(){F()(a),p(!0),setTimeout((function(){return p(!1)}),2e3)},children:l?"---- copied! ----":"copy to clipboard"}),Object(D.jsx)(f.a,{language:"javascript",style:m.a,customStyle:{height:"100%",margin:"0"},children:a})]})};var T=n(76),E=n(91),I=n.n(E),S=n(557);function N(e,t){return{type:e,payload:t}}var C={settings:{slice:"patient",prefix:"patientForm",isDialog:!0,useFormTag:!0},fieldDefinitions:"firstName*\nlastName*\nencounterDate\nencounterType\nisArchived",fields:[{type:"TextField",label:"First Name",name:"firstName",required:!0},{type:"TextField",label:"Last Name",name:"lastName",required:!0},{type:"DateField",label:"EncounterDate",name:"encounterDate",required:!1},{type:"SelectField",label:"EncounterType",name:"encounterType",required:!1,isEnum:!0},{type:"ToggleField",label:"isArchived",name:"isArchived",required:!1}]},L="UPDATE_SETTING",w="UPDATE_FIELDDEFINITIONS",_="UPDATE_FIELDS",A=function(e,t){switch(t.type){case L:var n=t.payload,i=n.name,a=n.value;return I()(e,{settings:Object(T.a)({},i,{$set:a})});case w:return I()(e,{fieldDefinitions:{$set:t.payload}});case _:return I()(e,{fields:{$set:t.payload}});default:throw new Error("invalid action type '".concat(t.type,"'"))}},q=function(e){return function(t,n){t(N(w,e));var i=function(e){return e.split(/\r?\n/).map(P).filter((function(e){return!!e}))}(e);t(N(_,i))}};function P(e){if(!(e=e.trim()))return null;var t=e.replace(/\W/g,""),n=Object(S.a)(t),i={type:"TextField",name:t,label:n,required:e.endsWith("*")};return i.name.startsWith("is")?(i.type="ToggleField",i.label=n.replace("Is ","")+"?"):i.name.toLowerCase().indexOf("date")>-1?i.type="DateField":i.name.toLowerCase().endsWith("type")?(i.type="SelectField",i.isEnum=!0):i.name.toLowerCase().indexOf("description")>-1&&(i.type="MultilineTextField"),i}n(477);var B=n(559),k=n(558),M=n(556),G=n(562),U=n(563);var V=k.a.TextArea,W=function(){var e=Object(i.useContext)(Y),t=e.state,n=e.dispatch,a=t.fieldDefinitions,s=Object(i.useState)(a),r=Object(c.a)(s,2),o=r[0],l=r[1],d=function(e,t){var n=Object(i.useState)(e),a=Object(c.a)(n,2),s=a[0],r=a[1];return Object(i.useEffect)((function(){var n=setTimeout((function(){r(e)}),t);return function(){clearTimeout(n)}}),[e,t]),s}(o,300);Object(i.useEffect)((function(){void 0!==d&&n(q(d))}),[d]);return Object(D.jsx)(B.a,{bg:"dark",text:"white",className:"field-definitions",children:Object(D.jsxs)(B.a.Body,{children:[Object(D.jsxs)(B.a.Subtitle,{className:"mb-2",children:[Object(D.jsx)(G.a,{})," Field Definitions"]}),Object(D.jsxs)(B.a.Text,{className:"field-definitions__description",children:["Enter a field name on each line. ",Object(D.jsxs)("em",{children:["Note: add a ",Object(D.jsx)("span",{className:"text-white",children:"*"})," after the name to mark the field as required."]})]}),Object(D.jsx)(M.a,{size:"small",initialValues:{fieldDefinitions:o},onValuesChange:function(e){l(e.fieldDefinitions)},className:"mb-2",children:Object(D.jsx)(M.a.Item,{name:"fieldDefinitions",children:Object(D.jsx)(V,{rows:6,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"})})}),Object(D.jsxs)(B.a.Text,{className:"field-definitions__description",children:[Object(D.jsx)(U.a,{})," Some field types are auto-detected based on the field name."]})]})})},z=(n(546),n(561)),H=function(){var e=Object(i.useContext)(Y),t=e.state,n=e.dispatch;return Object(D.jsx)(B.a,{bg:"secondary",text:"white",className:"form-settings",children:Object(D.jsxs)(B.a.Body,{children:[Object(D.jsxs)(B.a.Subtitle,{className:"mb-2",children:[Object(D.jsx)(G.a,{})," Form Settings"]}),Object(D.jsxs)(M.a,{size:"small",labelCol:{span:8},wrapperCol:{span:14},initialValues:Object(u.a)({},t.settings),onValuesChange:function(e){var t=Object.entries(e).pop(),i=Object(c.a)(t,2),a=i[0],s=i[1];n(N(L,{name:a,value:s}))},children:[Object(D.jsx)(M.a.Item,{label:"Slice",name:"slice",children:Object(D.jsx)(k.a,{})}),Object(D.jsx)(M.a.Item,{label:"Prefix",name:"prefix",children:Object(D.jsx)(k.a,{})}),Object(D.jsx)(M.a.Item,{label:"Dialog?",name:"isDialog",valuePropName:"checked",children:Object(D.jsx)(z.a,{})}),Object(D.jsx)(M.a.Item,{label:"Form Tag?",name:"useFormTag",valuePropName:"checked",children:Object(D.jsx)(z.a,{})})]})]})})},R=n(564),Y=a.a.createContext(),$=function(){var e=function(e,t){var n=Object(i.useReducer)(e,t),a=Object(c.a)(n,2),s=a[0],r=a[1],o=function(){return s};return[s,function e(t){"function"===typeof t?t(e,o):r(t)}]}(A,C),t=Object(c.a)(e,2),n={state:t[0],dispatch:t[1]};return Object(D.jsx)(Y.Provider,{value:n,children:Object(D.jsx)("div",{className:"form-generator",children:Object(D.jsxs)(o.a,{children:[Object(D.jsxs)(l.a,{span:8,className:"form-generator__sidebar",children:[Object(D.jsxs)("h1",{children:[Object(D.jsx)(R.a,{})," Form Generator"]}),Object(D.jsx)(H,{}),Object(D.jsx)(W,{})]}),Object(D.jsx)(l.a,{span:16,className:"form-generator__code",children:Object(D.jsx)(v,{})})]})})})},J=function(){return Object(D.jsx)($,{})},K=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,565)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),s(e),r(e)}))};r.a.render(Object(D.jsx)(a.a.StrictMode,{children:Object(D.jsx)(J,{})}),document.getElementById("root")),K()}},[[547,1,2]]]);
//# sourceMappingURL=main.786560f6.chunk.js.map